@tailwind base;
@tailwind components;
@tailwind utilities;

/* ═══════════════════════════════════════════════════════════════════════════════
   ULTRA-MINIMALIST DESIGN SYSTEM
   ═══════════════════════════════════════════════════════════════════════════════

   Design Philosophy:
   - Pure white canvas with typography-driven hierarchy
   - Near-invisible chrome - UI fades into the background
   - Single accent color used extremely sparingly
   - Spacing and weight create visual structure, not colors
   - Ghost interactions - elements reveal on hover

   ═══════════════════════════════════════════════════════════════════════════════ */

:root {
	/* ─────────────────────────────────────────────────────────────────────────────
	   MOBILE-FIRST TOKENS
	   ───────────────────────────────────────────────────────────────────────────── */
	--safe-area-top: env(safe-area-inset-top, 0px);
	--safe-area-bottom: env(safe-area-inset-bottom, 0px);
	--safe-area-left: env(safe-area-inset-left, 0px);
	--safe-area-right: env(safe-area-inset-right, 0px);

	--touch-target-min: 44px;
	--touch-target-comfortable: 48px;

	/* ─────────────────────────────────────────────────────────────────────────────
	   ACCENT - Ocean palette (logo blue #0f4c75 → teal blend)
	   ───────────────────────────────────────────────────────────────────────────── */
	--color-accent: #0e8a9a;
	--color-accent-subtle: rgba(14, 138, 154, 0.08);
	--color-accent-hover: rgba(14, 138, 154, 0.12);

	/* Primary palette - bridging logo blue and teal */
	--color-primary-900: #0f4c75;  /* Logo color - anchor */
	--color-primary-800: #0e6380;
	--color-primary-700: #0d7a8b;
	--color-primary-600: #0c8292;  /* Hover state */
	--color-primary-500: #0e8a9a;  /* Main color */
	--color-primary-400: #14a3b3;
	--color-primary-300: #3dc4d2;
	--color-primary-200: #8ee3ec;
	--color-primary-100: rgba(14, 138, 154, 0.15);
	--color-primary-50: rgba(14, 138, 154, 0.08);

	/* ─────────────────────────────────────────────────────────────────────────────
	   SURFACES - Pure white, no layering
	   ───────────────────────────────────────────────────────────────────────────── */
	--color-field-void: #ffffff;
	--color-field-depth: #fafafa;
	--color-field-surface: #ffffff;
	--color-field-elevated: #ffffff;

	/* ─────────────────────────────────────────────────────────────────────────────
	   TEXT - Minimal palette, weight-driven hierarchy
	   ───────────────────────────────────────────────────────────────────────────── */
	--color-text-source: #0a0a0a;
	--color-text-manifest: #525252;
	--color-text-flow: #171717;
	--color-text-whisper: #a3a3a3;
	--color-text-hint: #d4d4d4;

	/* ─────────────────────────────────────────────────────────────────────────────
	   BORDERS - Nearly invisible, structural only
	   ───────────────────────────────────────────────────────────────────────────── */
	--color-veil-thin: rgba(0, 0, 0, 0.06);
	--color-veil-present: rgba(0, 0, 0, 0.08);
	--color-veil-clear: rgba(0, 0, 0, 0.12);

	/* ─────────────────────────────────────────────────────────────────────────────
	   SHADOWS - Barely perceptible
	   ───────────────────────────────────────────────────────────────────────────── */
	--shadow-xs: 0 1px 2px rgba(0, 0, 0, 0.04);
	--shadow-sm: 0 1px 3px rgba(0, 0, 0, 0.06);
	--shadow-md: 0 4px 12px rgba(0, 0, 0, 0.08);
	--shadow-lg: 0 8px 24px rgba(0, 0, 0, 0.12);
	--shadow-xl: 0 16px 48px rgba(0, 0, 0, 0.16);

	/* Panel - subtle definition */
	--shadow-panel: 0 0 0 1px rgba(0, 0, 0, 0.05);
	--shadow-panel-hover: 0 0 0 1px rgba(0, 0, 0, 0.1);

	/* Elevated - for modals/dropdowns */
	--shadow-elevated: 0 4px 24px rgba(0, 0, 0, 0.12), 0 0 0 1px rgba(0, 0, 0, 0.05);

	/* ─────────────────────────────────────────────────────────────────────────────
	   TIMING
	   ───────────────────────────────────────────────────────────────────────────── */
	--duration-instant: 50ms;
	--duration-fast: 100ms;
	--duration-normal: 150ms;
	--duration-slow: 250ms;

	--ease-out: cubic-bezier(0.33, 1, 0.68, 1);
	--ease-in-out: cubic-bezier(0.65, 0, 0.35, 1);

	/* ─────────────────────────────────────────────────────────────────────────────
	   GRADIENTS - Ocean theme
	   ───────────────────────────────────────────────────────────────────────────── */
	--gradient-primary: linear-gradient(135deg, #0f4c75 0%, #0e8a9a 100%);
	--gradient-subtle: linear-gradient(180deg, rgba(14, 138, 154, 0.03) 0%, transparent 100%);

	/* Semantic colors */
	--color-error-500: #dc2626;
	--color-error-600: #b91c1c;
	--color-error-50: rgba(220, 38, 38, 0.05);
	--color-success-500: #16a34a;
	--color-success-600: #15803d;
	--color-warning-500: #d97706;
	--color-warning-600: #b45309;
	/* Secondary accent - pure teal (for special highlights) */
	--color-accent-teal: #0d9488;
	--color-teal-500: #14b8a6;
	--color-teal-600: #0d9488;
	--color-teal-700: #0f766e;

	/* Legacy */
	--color-challenger: #dc2626;
}

/* ═══════════════════════════════════════════════════════════════════════════════
   DARK MODE - True black, minimal contrast
   ═══════════════════════════════════════════════════════════════════════════════ */

[data-theme='dark'] {
	--color-accent: #3dc4d2;
	--color-accent-subtle: rgba(61, 196, 210, 0.12);
	--color-accent-hover: rgba(61, 196, 210, 0.18);

	--color-primary-500: #3dc4d2;
	--color-primary-600: #14a3b3;
	--color-primary-400: #6dd8e4;
	--color-primary-50: rgba(61, 196, 210, 0.08);
	--color-primary-100: rgba(61, 196, 210, 0.12);

	--gradient-primary: linear-gradient(135deg, #14a3b3 0%, #3dc4d2 100%);

	--color-field-void: #0a0a0a;
	--color-field-depth: #111111;
	--color-field-surface: #0a0a0a;
	--color-field-elevated: #1a1a1a;

	--color-text-source: #fafafa;
	--color-text-manifest: #a3a3a3;
	--color-text-flow: #e5e5e5;
	--color-text-whisper: #525252;
	--color-text-hint: #404040;

	--color-veil-thin: rgba(255, 255, 255, 0.06);
	--color-veil-present: rgba(255, 255, 255, 0.08);
	--color-veil-clear: rgba(255, 255, 255, 0.12);

	--shadow-panel: 0 0 0 1px rgba(255, 255, 255, 0.06);
	--shadow-elevated: 0 4px 24px rgba(0, 0, 0, 0.5), 0 0 0 1px rgba(255, 255, 255, 0.08);
}

/* ═══════════════════════════════════════════════════════════════════════════════
   BASE STYLES
   ═══════════════════════════════════════════════════════════════════════════════ */

* {
	margin: 0;
	box-sizing: border-box;
}

html {
	font-size: 16px;
	scroll-behavior: smooth;
	background-color: var(--color-field-void);
	height: 100%;
	overflow: hidden;
}

body {
	/* Apple System Fonts - SF Pro for macOS/iOS, system fonts for other platforms */
	font-family: -apple-system, BlinkMacSystemFont, 'SF Pro Display', 'SF Pro Text',
		'Helvetica Neue', 'Segoe UI', system-ui, sans-serif;
	font-size: 16px;
	font-weight: 400;
	line-height: 1.6;
	color: var(--color-text-source);
	background-color: var(--color-field-void);
	-webkit-font-smoothing: antialiased;
	-moz-osx-font-smoothing: grayscale;
	height: 100%;
	overflow: hidden;
	letter-spacing: -0.01em;
}

/* Typography Scale - ChatGPT-consistent sizing */
h1 {
	font-size: 1.5rem;    /* 24px */
	font-weight: 600;
	letter-spacing: -0.02em;
	color: var(--color-text-source);
}

h2 {
	font-size: 1.25rem;   /* 20px */
	font-weight: 600;
	letter-spacing: -0.02em;
	color: var(--color-text-source);
}

h3 {
	font-size: 1rem;      /* 16px */
	font-weight: 600;
	letter-spacing: -0.01em;
	color: var(--color-text-source);
}

h4, h5, h6 {
	font-size: 0.9375rem; /* 15px */
	font-weight: 600;
	letter-spacing: -0.01em;
	color: var(--color-text-source);
}

::selection {
	background-color: rgba(0, 0, 0, 0.1);
	color: inherit;
}

[data-theme='dark'] ::selection {
	background-color: rgba(255, 255, 255, 0.2);
}

/* Focus - subtle ring */
*:focus-visible {
	outline: 2px solid var(--color-text-source);
	outline-offset: 2px;
}

textarea:focus,
textarea:focus-visible {
	outline: none !important;
}

/* ═══════════════════════════════════════════════════════════════════════════════
   SCROLLBARS - Nearly invisible
   ═══════════════════════════════════════════════════════════════════════════════ */

::-webkit-scrollbar {
	width: 6px;
	height: 6px;
}

::-webkit-scrollbar-track {
	background: transparent;
}

::-webkit-scrollbar-thumb {
	background: var(--color-veil-thin);
	border-radius: 3px;
}

::-webkit-scrollbar-thumb:hover {
	background: var(--color-veil-present);
}

/* Hide scrollbar utility */
.scrollbar-hide::-webkit-scrollbar {
	display: none;
}

.scrollbar-hide {
	-ms-overflow-style: none;
	scrollbar-width: none;
}

/* ═══════════════════════════════════════════════════════════════════════════════
   ANIMATIONS
   ═══════════════════════════════════════════════════════════════════════════════ */

@keyframes spin {
	to { transform: rotate(360deg); }
}

@keyframes fadeIn {
	from { opacity: 0; }
	to { opacity: 1; }
}

@keyframes slideUp {
	from { opacity: 0; transform: translateY(4px); }
	to { opacity: 1; transform: translateY(0); }
}

@keyframes slideDown {
	from { opacity: 0; transform: translateY(-4px); }
	to { opacity: 1; transform: translateY(0); }
}

.animate-spin { animation: spin 1s linear infinite; }
.animate-fade-in { animation: fadeIn 0.15s ease-out; }
.animate-slide-up { animation: slideUp 0.15s ease-out; }

/* Typing indicator */
@keyframes typing-pulse {
	0%, 80%, 100% { opacity: 0.3; }
	40% { opacity: 1; }
}

.typing-dot {
	width: 4px;
	height: 4px;
	border-radius: 50%;
	background: var(--color-text-whisper);
	animation: typing-pulse 1.2s ease-in-out infinite;
}

.typing-dot:nth-child(1) { animation-delay: 0s; }
.typing-dot:nth-child(2) { animation-delay: 0.15s; }
.typing-dot:nth-child(3) { animation-delay: 0.3s; }

.typing-dots {
	display: flex;
	gap: 4px;
	align-items: center;
}

/* ═══════════════════════════════════════════════════════════════════════════════
   BUTTONS - Ghost by default, minimal chrome
   ═══════════════════════════════════════════════════════════════════════════════ */

button:not(:disabled):active,
[role='button']:not(:disabled):active {
	transform: scale(0.98);
}

button:disabled,
[role='button']:disabled {
	cursor: not-allowed;
	opacity: 0.4;
}

/* Primary - solid, used sparingly */
.btn-primary {
	background: var(--color-primary-500);
	color: #ffffff;
	border: none;
	border-radius: 6px;
	padding: 8px 16px;
	font-weight: 500;
	font-size: 14px;
	transition: all var(--duration-fast) ease;
}

.btn-primary:hover:not(:disabled) {
	background: var(--color-primary-600);
}

/* Ghost - default for most controls */
.btn-ghost {
	background: transparent;
	border: none;
	color: var(--color-text-manifest);
	border-radius: 6px;
	padding: 6px 10px;
	font-size: 14px;
	transition: all var(--duration-fast) ease;
}

.btn-ghost:hover:not(:disabled) {
	background: var(--color-accent-subtle);
	color: var(--color-text-source);
}

/* Outline - secondary actions */
.btn-outline {
	background: transparent;
	border: 1px solid var(--color-veil-present);
	color: var(--color-text-manifest);
	border-radius: 6px;
	padding: 6px 12px;
	font-size: 14px;
	transition: all var(--duration-fast) ease;
}

.btn-outline:hover:not(:disabled) {
	border-color: var(--color-text-source);
	color: var(--color-text-source);
}

/* ═══════════════════════════════════════════════════════════════════════════════
   CARDS & CONTAINERS - Barely there
   ═══════════════════════════════════════════════════════════════════════════════ */

.card-subtle {
	background: var(--color-field-surface);
	border-radius: 8px;
}

.card-bordered {
	background: var(--color-field-surface);
	border: 1px solid var(--color-veil-thin);
	border-radius: 8px;
}

.card-elevated {
	background: var(--color-field-surface);
	box-shadow: var(--shadow-elevated);
	border-radius: 12px;
}

/* ═══════════════════════════════════════════════════════════════════════════════
   MESSAGE BUBBLES - Clean, minimal
   ═══════════════════════════════════════════════════════════════════════════════ */

.bubble-user {
	background: var(--color-text-source);
	color: var(--color-field-void);
	border-radius: 16px 16px 4px 16px;
}

.bubble-assistant {
	background: transparent;
	color: var(--color-text-source);
	border-radius: 16px;
}

/* ═══════════════════════════════════════════════════════════════════════════════
   MOBILE UTILITIES
   ═══════════════════════════════════════════════════════════════════════════════ */

.pt-safe { padding-top: env(safe-area-inset-top, 0px); }
.pb-safe { padding-bottom: env(safe-area-inset-bottom, 0px); }
.h-dvh { height: 100dvh; }
.min-h-dvh { min-height: 100dvh; }

.touch-target {
	min-width: var(--touch-target-min);
	min-height: var(--touch-target-min);
}

@media (max-width: 767px) {
	input, textarea, select {
		font-size: 16px !important;
	}
}

/* ═══════════════════════════════════════════════════════════════════════════════
   UTILITY CLASSES
   ═══════════════════════════════════════════════════════════════════════════════ */

.text-primary { color: var(--color-text-source); }
.text-secondary { color: var(--color-text-manifest); }
.text-tertiary { color: var(--color-text-whisper); }

.bg-surface { background: var(--color-field-surface); }
.bg-subtle { background: var(--color-field-depth); }

.border-subtle { border-color: var(--color-veil-thin); }
.border-default { border-color: var(--color-veil-present); }

/* Glass effect */
.glass {
	background: rgba(255, 255, 255, 0.8);
	backdrop-filter: blur(12px);
	-webkit-backdrop-filter: blur(12px);
}

[data-theme='dark'] .glass {
	background: rgba(10, 10, 10, 0.8);
}

/* Hover reveal */
.hover-reveal {
	opacity: 0;
	transition: opacity var(--duration-fast) ease;
}

.group:hover .hover-reveal,
*:hover > .hover-reveal {
	opacity: 1;
}

/* ═══════════════════════════════════════════════════════════════════════════════
   LEGACY COMPATIBILITY
   ═══════════════════════════════════════════════════════════════════════════════ */

.sidebar-icon-btn {
	display: flex;
	align-items: center;
	justify-content: center;
	width: 32px;
	height: 32px;
	border-radius: 6px;
	background: transparent;
	border: none;
	cursor: pointer;
	color: var(--color-text-whisper);
	transition: all var(--duration-fast) ease;
}

.sidebar-icon-btn:hover {
	background: var(--color-accent-subtle);
	color: var(--color-text-source);
}

.mobile-send-btn {
	width: 40px;
	height: 40px;
	border-radius: 8px;
	display: flex;
	align-items: center;
	justify-content: center;
	background: var(--color-text-source);
	color: var(--color-field-void);
	border: none;
	transition: opacity var(--duration-fast) ease;
}

.mobile-send-btn:hover:not(:disabled) {
	opacity: 0.85;
}

.mobile-send-btn:disabled {
	opacity: 0.3;
}

/* Input premium - simplified */
.input-premium {
	background: var(--color-field-surface);
	border: 1px solid var(--color-veil-thin);
	border-radius: 8px;
	transition: border-color var(--duration-fast) ease;
}

.input-premium:focus-within {
	border-color: var(--color-text-source);
}

/* Radius scale */
.radius-sm { border-radius: 4px; }
.radius-md { border-radius: 6px; }
.radius-lg { border-radius: 8px; }
.radius-xl { border-radius: 12px; }
.radius-full { border-radius: 9999px; }
